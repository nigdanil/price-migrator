# üõ† price-migrator

**price-migrator** ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –Ω–∞ Go –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π SQLite –±–∞–∑—ã (`scraper.db`) –≤ PostgreSQL, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—Å—Ç–∞–≤–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π.

---

## üì¶ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü:

- `gallery_categories`
- `category_urls`
- `gallery_products`
- `gallery_product_prices`

–ò–∑ SQLite ‚Üí –≤ PostgreSQL —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Å—Å—ã–ª–æ—á–Ω–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
price-migrator/
‚îú‚îÄ‚îÄ db/                 # –õ–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ connect.go
‚îÇ   ‚îú‚îÄ‚îÄ migrate.go
‚îÇ   ‚îî‚îÄ‚îÄ helpers.go
‚îú‚îÄ‚îÄ utils/              # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ (UPSERT –∏ —Ç.–¥.)
‚îÇ   ‚îî‚îÄ‚îÄ query.go
‚îú‚îÄ‚îÄ .env                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
‚îú‚îÄ‚îÄ main.go             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ go.mod              # –ú–æ–¥—É–ª–∏ Go
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
````

---

## ‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Go ‚â• 1.18
2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ `.env` —Ñ–∞–π–ª (–∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è):

```env
PG_HOST=localhost
PG_PORT=5432
PG_USER=root
PG_PASSWORD=yourpassword
PG_DB=price_monitor
PG_SCHEMA=price_data
```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –ª–µ–∂–∏—Ç `scraper.db` (SQLite).
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
go run main.go
```

---

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

* üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: —É–¥–∞–ª—è–µ—Ç –ª–∏—à–Ω–∏–µ –∑–∞–ø–∏—Å–∏, –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ
* üîó **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π**: –º–∏–≥—Ä–∞—Ü–∏—è —Å —É—á—ë—Ç–æ–º `FOREIGN KEY`
* ‚úÖ **–ê–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: –µ—Å–ª–∏ `category_id` –µ—Å—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, –Ω–æ –Ω–µ—Ç –≤ `gallery_categories` ‚Äî –æ–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã
* üìä **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ deferred constraints**: –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `SET CONSTRAINTS ALL DEFERRED`

---

## üß™ –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```text
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Å—ã–ª–æ–∫ –≤ category_urls...
üö® –í–ù–ò–ú–ê–ù–ò–ï: category_id 'halal_meats' –µ—Å—Ç—å –≤ category_urls, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ gallery_categories
‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: halal_meats
‚û° –ù–∞—á–∞–ª–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü—ã: gallery_products
üì• –ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ SQLite: 13625 —Å—Ç—Ä–æ–∫
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã gallery_products –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `scraper.db` –∏–ª–∏ `.env` –≤ –ø—É–±–ª–∏—á–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
* –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ GitHub –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∏–ª–∏ Personal Access Tokens

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

**nigdanil** ‚Äî [github.com/nigdanil](https://github.com/nigdanil)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞

```